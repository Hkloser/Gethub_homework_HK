---
title: "Heidi Kloser Homework_5"
author: "Heidi Kloser"
date: "2022-11-15"
output: pdf_document
---

```{r}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, 
                      error = FALSE)
```


Libraries
```{r}
#packages
library(tidyverse)
library(lubridate)
library(ggthemes)
library(broom)
library(knitr)
library(scales)
library(tigris)
library(sf)
library(viridis)
library(shiny)
library(leaflet)
library(DT)
library(plotly)
library(flexdashboard)
library(jsonlite)
library(maptools)
library(ggplot2)
```

List files in "data" sub directory
```{r}
list.files("data")
```

```{r}
# read in data
homicides<-read.csv("data/homicide-data.csv")

# piping n code to clean up data
homicides<- homicides%>%
  mutate(state = str_to_upper(string = state))%>% # changing case
  mutate(city_name = paste(city, state))%>% # combine city and state name to one col
    mutate(status = factor(disposition, levels = c("Closed by arrest", 
                                                      "Closed without arrest", 
                                                      "Open/No arrest"), 
                      labels = c("solved", "unsolved", "unsolved")))%>% 
  # creating new col for solves/unsolved
  filter(str_detect(city_name, "Atlanta"))%>% # filtering to only Atlanta
  select(- city, - state, - disposition) #removing redundant columns


head(homicides, 3)

```

Putting map components in 
```{r}
ga_counties <- counties(state = "GA", cb = TRUE, class = "sf")
#getting geographical data from sf/tigris
class(ga_counties)
```

checking county and class data
```{r}
ga_counties %>% 
  slice(1:3)
class(ga_counties$geometry)
```
Making a map of Georgia counties
```{r}
ggplot() + 
  geom_sf(data = ga_counties, aes(fill = ALAND))
```

Incorporating homicide data into map
```{r}
atlanta <- tracts(state = "GA", county = "Fulton", cb = TRUE, class = "sf")
class(atlanta)
```

checking tract and class data
```{r}
atlanta %>% 
  slice(1:3)
class(atlanta$geometry)
```
Making a map of Atlanta
```{r}
atlanta %>% 
ggplot() + 
  geom_sf(data = atlanta, aes(fill = ALAND))
```

testing out some other code
```{r}
manhattan_roads <- roads("NY", "New York")

ggplot(manhattan_roads) + 
  geom_sf() + 
  theme_void()
```

```{r}
ggplot(atlanta) + 
  geom_sf() + 
  theme_void()
```



